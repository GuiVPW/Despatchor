# Migration `20201105041327-removed-chat-and-messages-from-models`

This migration has been generated by Xubili at 11/5/2020, 1:13:27 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."ChatOnUser" DROP CONSTRAINT "ChatOnUser_chatId_fkey"

ALTER TABLE "public"."ChatOnUser" DROP CONSTRAINT "ChatOnUser_userId_fkey"

ALTER TABLE "public"."Message" DROP CONSTRAINT "Message_chatId_fkey"

ALTER TABLE "public"."Message" DROP CONSTRAINT "Message_createdById_fkey"

DROP TABLE "public"."Chat"

DROP TABLE "public"."ChatOnUser"

DROP TABLE "public"."Message"
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201030184138-new-database..20201105041327-removed-chat-and-messages-from-models
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -19,10 +19,8 @@
   liked         PostsLike[]
   verifiedEmail Boolean      @default(false)
   updatedAt     DateTime     @updatedAt
   createdAt     DateTime     @default(now())
-  sentMessages  Message[]
-  chats         ChatOnUser[]
 }
 model Post {
   id           String      @id @default(uuid())
@@ -57,29 +55,4 @@
   comment   String
   createdAt DateTime @default(now())
   updatedAt DateTime @updatedAt
 }
-
-model Chat {
-  id       String       @id @default(uuid())
-  users    ChatOnUser[]
-  messages Message[]
-}
-
-model Message {
-  id          String   @id @default(uuid())
-  body        String
-  createdBy   User     @relation(fields: [createdById], references: [id])
-  createdById String
-  chat        Chat     @relation(fields: [chatId], references: [id])
-  chatId      String
-  createdAt   DateTime @default(now())
-}
-
-model ChatOnUser {
-  chat   Chat   @relation(fields: [chatId], references: [id])
-  chatId String
-  user   User   @relation(fields: [userId], references: [id])
-  userId String
-
-  @@id([chatId, userId])
-}
```


